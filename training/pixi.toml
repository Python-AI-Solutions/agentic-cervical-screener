[project]
name = "cervical-screening"
version = "0.1.0"
description = "Cervical cell classification using YOLO"
channels = ["conda-forge", "pytorch"]
platforms = ["linux-64", "osx-64", "osx-arm64", "win-64"]

[dependencies]
python = ">=3.8,<3.13"
pytorch = ">=2.0.0"
torchvision = ">=0.15.0"
numpy = ">=1.19.0,<2.2.0"
pandas = ">=1.3.0,<2.3.0"
matplotlib = ">=3.3.0"
seaborn = ">=0.11.0"
pillow = ">=8.0.0,<12.0.0"
opencv = ">=4.5.0"
scikit-learn = ">=0.24.0"
tqdm = ">=4.50.0"
pyyaml = ">=5.4.0"
pip = "*"

[pypi-dependencies]
ultralytics = ">=8.0.0"

[feature.dev.dependencies]
pytest = ">=7.4.0"
pytest-cov = ">=4.1.0"
ruff = ">=0.1.0"
pre-commit = ">=3.5.0"

[tasks]
# Training tasks
train-baseline = "python experiments/baseline_training/train.py"
train-baseline-quick = { cmd = "python experiments/baseline_training/train.py", env = { EPOCHS = "2" } }

# Code quality tasks
format = "ruff format ."
lint = "ruff check ."
lint-fix = "ruff check --fix ."
test = "pytest tests/ -v"
test-cov = "pytest tests/ --cov=cervical_screening --cov-report=html --cov-report=term"

# Pre-commit
pre-commit-install = "pre-commit install"
pre-commit-run = "pre-commit run --all-files"

# Clean
clean = { cmd = "rm -rf __pycache__ .pytest_cache .ruff_cache htmlcov .coverage", depends_on = [] }

[feature.dev.tasks]
dev-setup = { cmd = "pre-commit install && echo 'Development environment ready!'", depends_on = ["pre-commit-install"] }
